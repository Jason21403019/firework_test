# 錯誤代碼對照表

此文件供開發人員參考，用戶看到的是白話文錯誤訊息。

## 安全驗證相關 (E001-E099)

| 代碼 | 工程說明 | 用戶看到的訊息 |
|------|----------|----------------|
| E001 | CSRF token 不存在 | 系統忙碌中，請稍後再試（E001） |
| E002 | CSRF token 過期（超過3分鐘） | 操作時間過長，請重新操作（E002） |
| E003 | CSRF token 不匹配 | 系統驗證失敗，請重新操作（E003） |
| E004 | Session 不一致 | 您的登入狀態有誤，請重新登入（E004） |
| E005 | Session 不活躍 | 系統忙碌中，請稍後再試（E005） |

## 會員驗證相關 (E100-E199)

| 代碼 | 工程說明 | 用戶看到的訊息 |
|------|----------|----------------|
| E101 | 未提供會員資訊 | 請先登入會員（E101） |
| E102 | 會員資料驗證失敗 | 會員資料有誤，請重新登入（E102） |
| E103 | 已達每日占卜上限 | 今天已經完成占卜了，明天再來吧！（E103） |

## 機器人驗證相關 (E200-E299)

| 代碼 | 工程說明 | 用戶看到的訊息 |
|------|----------|----------------|
| E201 | Turnstile 驗證失敗 | 安全驗證失敗，請重新操作（E201） |
| E202 | Turnstile 驗證過期或重複 | 驗證已過期，請重新驗證（E202） |
| E203 | 檢測到自動化行為 | 系統檢測到異常操作，請使用正常方式操作（E203） |

## 資料庫相關 (E300-E399)

| 代碼 | 工程說明 | 用戶看到的訊息 |
|------|----------|----------------|
| E301 | 資料庫連接失敗 | 系統維護中，請稍後再試（E301） |
| E302 | 資料庫查詢失敗 | 系統忙碌中，請稍後再試（E302） |
| E303 | 資料儲存失敗 | 系統忙碌中，請稍後再試（E303） |

## 一般錯誤 (E900-E999)

| 代碼 | 工程說明 | 用戶看到的訊息 |
|------|----------|----------------|
| E901 | 未知錯誤 | 系統發生錯誤，請稍後再試（E901） |
| E902 | 請求方法錯誤 | 操作方式有誤，請重新操作（E902） |
| E903 | JSON 格式錯誤 | 資料格式有誤，請重新操作（E903） |

## 使用方式

在 PHP 中返回錯誤時：
```php
JSONReturn('系統忙碌中，請稍後再試（E001）', 'error');
```

同時在 error_log 中記錄詳細資訊：
```php
error_log("[E001] CSRF token 不存在 - Session ID: " . session_id());
```

